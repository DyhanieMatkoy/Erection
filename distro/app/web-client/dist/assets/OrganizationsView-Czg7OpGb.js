import{d as p,h as c,c as g,w as s,a as n,b as l,i as r,u as t,n as f,t as i,e as x,j as h,k as v,o as d}from"./index-6EFolkGo.js";import{u as C}from"./useReferenceView-CoO5t6qc.js";import{u as _,_ as k,r as y,s as w,t as S,v as V}from"./FormField.vue_vue_type_script_setup_true_lang-BDJ46V17.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-fByiLTOw.js";import{_ as O}from"./DataTable.vue_vue_type_script_setup_true_lang-BaWuvIHH.js";import{_ as D}from"./Modal.vue_vue_type_script_setup_true_lang-DDauu2p3.js";const M={class:"space-y-6"},$=["onClick"],B=["onClick"],E={key:0,class:"rounded-md bg-red-50 p-4"},j={class:"text-sm text-red-800"},N=["disabled"],F=p({__name:"OrganizationsView",setup(R){const m=_(),e=C({getAll:V,create:S,update:w,delete:y},()=>m.fetchOrganizations(!0)),u=[{key:"id",label:"ID"},{key:"name",label:"Наименование"},{key:"is_deleted",label:"Статус"}];return c(()=>{e.loadData()}),(P,o)=>(d(),g(z,null,{default:s(()=>[n("div",M,[o[6]||(o[6]=n("div",null,[n("h2",{class:"text-2xl font-bold text-gray-900"},"Организации"),n("p",{class:"mt-1 text-sm text-gray-600"},"Управление справочником организаций")],-1)),l(O,{columns:u,data:t(e).table.data.value,loading:t(e).table.loading.value,pagination:t(e).table.pagination.value,onRowClick:t(e).handleEdit,onPageChange:t(e).handlePageChange,onSearch:t(e).handleSearch,onSort:t(e).handleSort},{"header-actions":s(()=>[n("button",{onClick:o[0]||(o[0]=(...a)=>t(e).handleCreate&&t(e).handleCreate(...a)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"},[...o[5]||(o[5]=[n("svg",{class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),x(" Создать ",-1)])])]),"cell-is_deleted":s(({value:a})=>[n("span",{class:f(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",a?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},i(a?"Удален":"Активен"),3)]),actions:s(({row:a})=>[n("button",{onClick:r(b=>t(e).handleEdit(a),["stop"]),class:"text-blue-600 hover:text-blue-900 mr-4"}," Изменить ",8,$),n("button",{onClick:r(b=>t(e).handleDelete(a),["stop"]),class:"text-red-600 hover:text-red-900"}," Удалить ",8,B)]),_:1},8,["data","loading","pagination","onRowClick","onPageChange","onSearch","onSort"]),l(D,{open:t(e).modalOpen.value,title:t(e).editingItem.value?"Редактирование организации":"Создание организации",size:"md",onClose:t(e).handleCloseModal},{footer:s(()=>[n("button",{onClick:o[3]||(o[3]=(...a)=>t(e).handleCloseModal&&t(e).handleCloseModal(...a)),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Отмена "),n("button",{onClick:o[4]||(o[4]=(...a)=>t(e).handleSubmit&&t(e).handleSubmit(...a)),type:"button",disabled:t(e).submitting.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},i(t(e).submitting.value?"Сохранение...":"Сохранить"),9,N)]),default:s(()=>[n("form",{onSubmit:o[2]||(o[2]=r((...a)=>t(e).handleSubmit&&t(e).handleSubmit(...a),["prevent"])),class:"space-y-4"},[l(k,{modelValue:t(e).formData.value.name,"onUpdate:modelValue":o[1]||(o[1]=a=>t(e).formData.value.name=a),label:"Наименование",type:"text",required:"",error:t(e).errors.value.name},null,8,["modelValue","error"]),t(e).submitError.value?(d(),h("div",E,[n("p",j,i(t(e).submitError.value),1)])):v("",!0)],32)]),_:1},8,["open","title","onClose"])])]),_:1}))}});export{F as default};
