# Исправления импорта CSV и формы редактирования работ

## Выполненные изменения

### 1. Исправлен импорт цен из CSV
- **Проблема**: Цены не загружались из CSV файла
- **Решение**: Добавлено поле `price` в модели и API endpoints
- **Файлы**:
  - `api/models/references.py` - добавлено поле `price` в `WorkBase`
  - `api/endpoints/references.py` - обновлены SQL запросы для включения поля `price`
  - `web-client/src/types/models.ts` - добавлено поле `price` в интерфейс `Work`

### 2. Исправлен парсинг единиц измерения
- **Проблема**: Единицы измерения содержали лишние пробелы и символы
- **Решение**: Улучшена функция `parse_unit` для корректной обработки единиц измерения
- **Логика парсинга**:
  - Если единица содержит "руб./", берется часть после слэша (например, "руб./пог.м" → "пог.м")
  - Если единица содержит "руб/", берется часть после слэша (например, "руб/м2" → "м2")
  - Если единица содержит только "руб.", возвращается пустая строка
  - Удаляются все пробелы из единицы измерения
  - Удаляются лишние слэши в начале
- **Файлы**:
  - `api/endpoints/references.py` - функция `parse_unit`
  - `import_works_from_csv.py` - метод `parse_unit`

### 3. Добавлено поле "Цена" на форму редактирования
- **Проблема**: На форме редактирования работ не было поля для ввода цены
- **Решение**: Добавлено поле "Цена (Стоимость)" с типом number
- **Файлы**:
  - `web-client/src/views/references/WorksView.vue` - добавлен `FormField` для поля `price`

## Примеры использования

### Импорт из CSV
```bash
python import_works_from_csv.py умелец.csv
```

### Формат CSV файла
```csv
Тип работ;Наименование работы;Цена;Единица измерения
Электромонтажные работы;монтаж розетки (220 В);500;руб.
Электромонтажные работы;прокладка электрокабеля;100;руб./пог.м
```

### Результат импорта
- Работа "монтаж розетки (220 В)": цена = 500, единица = "" (пустая)
- Работа "прокладка электрокабеля": цена = 100, единица = "пог.м"

## Проверка

Для проверки корректности импорта можно использовать SQL запрос:
```sql
SELECT name, unit, price FROM works WHERE name LIKE '%монтаж%' LIMIT 5;
```

Или через Python:
```python
import sqlite3
conn = sqlite3.connect('construction.db')
cursor = conn.cursor()
cursor.execute('SELECT name, unit, price FROM works LIMIT 5')
for row in cursor.fetchall():
    print(f'{row[0]}: unit="{row[1]}", price={row[2]}')
```
