# GUI настройки программы

## Обзор

Добавлен графический интерфейс для настройки всех параметров программы из файла `env.ini`.

## Где найти

Меню **"Настройки"** в главном окне программы содержит два пункта:

1. **"Настройки программы"** - общие настройки (авторизация, печать)
2. **"Настройки печати"** - быстрый доступ к настройкам печатных форм

## Настройки программы

### Вкладка "Авторизация"

Настройка автоматического входа в систему:

- **Логин** - имя пользователя для автоматического входа
- **Пароль** - пароль для автоматического входа

**Примечание:** Оставьте поля пустыми, чтобы отключить автоматический вход.

### Вкладка "Печатные формы"

Настройка формата и шаблонов печатных форм:

#### Формат печатных форм

- **PDF** - для печати и просмотра (по умолчанию)
- **Excel** - для редактирования и обработки данных

#### Шаблоны Excel

- **Папка с шаблонами** - путь к папке с шаблонами (по умолчанию `PrnForms`)
- **Кнопка "Обзор..."** - выбрать папку через диалог
- **Кнопка "Создать шаблоны"** - создать стандартные шаблоны

## Использование

### Открытие настроек

1. Запустите программу
2. В главном меню выберите **"Настройки"** → **"Настройки программы"**
3. Откроется диалог с вкладками

### Изменение настроек

1. Перейдите на нужную вкладку
2. Измените параметры
3. Нажмите **"Применить"** для сохранения без закрытия
4. Или нажмите **"Сохранить"** для сохранения и закрытия

### Отмена изменений

Нажмите **"Отмена"** для закрытия без сохранения изменений.

## Примеры использования

### Настройка автоматического входа

1. Откройте **"Настройки программы"**
2. На вкладке **"Авторизация"** введите:
   - Логин: `admin`
   - Пароль: `admin`
3. Нажмите **"Сохранить"**
4. При следующем запуске программа войдет автоматически

### Переключение на Excel формат

1. Откройте **"Настройки программы"**
2. Перейдите на вкладку **"Печатные формы"**
3. Выберите **"Excel - для редактирования и обработки"**
4. Нажмите **"Создать шаблоны"** (опционально)
5. Нажмите **"Сохранить"**

### Изменение папки шаблонов

1. Откройте **"Настройки программы"**
2. Перейдите на вкладку **"Печатные формы"**
3. Нажмите **"Обзор..."** рядом с полем "Папка с шаблонами"
4. Выберите нужную папку
5. Нажмите **"Сохранить"**

## Структура env.ini

После сохранения настроек файл `env.ini` будет иметь следующую структуру:

```ini
[Auth]
login=admin
password=admin

[PrintForms]
format=PDF
templates_path=PrnForms
```

## Преимущества GUI настроек

✅ **Удобство** - не нужно редактировать файл вручную  
✅ **Безопасность** - проверка корректности данных  
✅ **Наглядность** - все настройки в одном месте  
✅ **Подсказки** - описание каждого параметра  
✅ **Быстрый доступ** - из главного меню программы  

## Технические детали

### Файлы

- `src/views/settings_dialog.py` - диалог настроек
- `src/views/main_window.py` - добавлены пункты меню

### Секции конфигурации

#### [Auth]
- `login` - логин для автоматического входа
- `password` - пароль для автоматического входа

#### [PrintForms]
- `format` - формат печати (PDF или EXCEL)
- `templates_path` - путь к папке с шаблонами

### Обратная совместимость

Диалог настроек поддерживает чтение старого формата `env.ini` (без секций) и автоматически конвертирует его в новый формат при сохранении.

## Расширение

Для добавления новых настроек:

1. Добавьте новую вкладку в `SettingsDialog`
2. Создайте элементы интерфейса для параметров
3. Добавьте чтение/запись в методы `load_settings()` и `apply_settings()`
4. Добавьте новую секцию в `env.ini`

## Примечания

- Изменения применяются сразу после сохранения
- Некоторые настройки могут требовать перезапуска программы
- Файл `env.ini` создается автоматически при первом сохранении
- Пароль хранится в открытом виде - не используйте важные пароли

## Безопасность

⚠️ **Внимание:** Пароль в `env.ini` хранится в открытом виде. Это сделано для удобства автоматического входа в локальной системе. Не используйте важные пароли и не передавайте файл `env.ini` третьим лицам.

## Поддержка

При возникновении проблем:
1. Проверьте права доступа к файлу `env.ini`
2. Убедитесь, что файл не открыт в другом редакторе
3. Попробуйте удалить `env.ini` и создать заново через GUI
4. Проверьте логи программы на наличие ошибок
