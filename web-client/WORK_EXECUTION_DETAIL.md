# Детализация отчета по выполненным работам

## Описание

Добавлена возможность открывать детализацию движений по регистру выполнения работ с возможностью перехода к исходным документам (сметам и ежедневным отчетам).

## Функциональность

### Desktop-приложение

В desktop-приложении функционал уже был реализован:
- Двойной клик по строке в отчете открывает диалог детализации
- В диалоге детализации показываются все движения по регистру
- Двойной клик по движению открывает соответствующий документ (смету или daily report)

### Веб-клиент

Добавлен аналогичный функционал:

1. **Просмотр детализации**
   - Двойной клик по строке в отчете открывает модальное окно с детализацией
   - В детализации показываются все движения по выбранным фильтрам
   - Отображается тип документа, номер/дата, дата движения, приход и расход

2. **Переход к документам**
   - Двойной клик по строке в детализации открывает соответствующий документ
   - Для смет открывается форма сметы
   - Для ежедневных отчетов открывается форма daily report

## API

### Endpoint для детализации

```
GET /api/v1/registers/work-execution/movements
```

**Параметры:**
- `period_from` (обязательный) - начало периода
- `period_to` (обязательный) - конец периода
- `object_id` (опциональный) - фильтр по объекту
- `estimate_id` (опциональный) - фильтр по смете
- `work_id` (опциональный) - фильтр по работе
- `page` - номер страницы (по умолчанию 1)
- `page_size` - размер страницы (по умолчанию 50, максимум 100)

**Ответ:**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "period": "2025-11-19",
      "recorder_type": "estimate",
      "recorder_id": 123,
      "line_number": 1,
      "object_id": 1,
      "object_name": "Объект 1",
      "estimate_id": 123,
      "estimate_number": "295",
      "work_id": 5,
      "work_name": "Монтаж конструкций",
      "quantity_income": 25.50,
      "quantity_expense": 0.00,
      "sum_income": 3521.55,
      "sum_expense": 0.00
    }
  ],
  "pagination": {
    "page": 1,
    "page_size": 50,
    "total_items": 7,
    "total_pages": 1
  }
}
```

## Компоненты

### WorkExecutionDetailDialog.vue

Модальный диалог для отображения детализации движений:
- Показывает все движения по регистру за выбранный период
- Поддерживает фильтрацию по объекту, смете и работе
- Позволяет открывать исходные документы двойным кликом

### WorkExecutionView.vue

Обновлен основной компонент регистра:
- Добавлен обработчик двойного клика для строк таблицы
- Добавлен компонент детализации
- Добавлена подсказка для пользователя

## Использование

1. Откройте регистр выполнения работ
2. Примените фильтры и нажмите "Применить"
3. Дважды кликните по любой строке в таблице
4. В открывшемся окне детализации увидите все движения
5. Дважды кликните по движению, чтобы открыть исходный документ

## Тестирование

Для тестирования функционала:

1. Запустите веб-сервер: `python start_server.py`
2. Откройте веб-клиент: `http://localhost:8000`
3. Перейдите в раздел "Регистры" → "Выполнение работ"
4. Примените фильтры с периодом
5. Дважды кликните по строке для просмотра детализации
6. Дважды кликните по движению для открытия документа
