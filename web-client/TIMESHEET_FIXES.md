# Исправления табеля (Timesheet Fixes)

## Дата: 25 ноября 2025

### Исправленные проблемы

#### 1. Выбор сметы не работал при изменении объекта

**Проблема:** При выборе объекта список смет не обновлялся, оставался пустым.

**Решение:**
- Добавлен обработчик `handleObjectChange()` в `TimesheetFormView.vue`
- При изменении объекта поле `estimate_id` сбрасывается в 0
- Computed свойство `filteredEstimates` автоматически фильтрует сметы по выбранному объекту

**Файлы:**
- `web-client/src/views/documents/TimesheetFormView.vue`

#### 2. Горизонтальная прокрутка для колонок дней месяца

**Проблема:** На узких экранах не было возможности прокрутить колонки дней (1-31), чтобы увидеть итоговые колонки справа.

**Решение:**
- Полностью переработана структура таблицы в `TimesheetLines.vue`
- Таблица разделена на 3 секции:
  1. **Фиксированная левая часть** - Сотрудник и Ставка (не прокручивается)
  2. **Прокручиваемая средняя часть** - Колонки дней 1-31 (с горизонтальной прокруткой)
  3. **Фиксированная правая часть** - Итого, Сумма, Действия (не прокручивается)
- Использован flexbox для создания фиксированных и прокручиваемых секций
- Выходные дни (суббота, воскресенье) выделены красным фоном

**Файлы:**
- `web-client/src/components/documents/TimesheetLines.vue`

### Дополнительные улучшения

- Исправлены TypeScript ошибки в функциях `daysInMonth`, `isWeekend`, `recalculateLine`
- Добавлены проверки на `undefined` для безопасности типов
- Улучшена читаемость кода

### Тестирование

Для проверки изменений:

1. Откройте веб-версию табеля
2. Выберите объект - список смет должен обновиться
3. Измените объект - список смет должен обновиться снова
4. На узком экране проверьте горизонтальную прокрутку колонок дней
5. Убедитесь, что колонки "Сотрудник" и "Итого/Сумма" остаются видимыми при прокрутке

### Команды для сборки

```bash
cd web-client
npm run build
```
