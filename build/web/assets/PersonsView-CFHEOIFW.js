import{d as p,h as c,c as f,w as s,a as n,b as l,i as r,u as t,n as x,t as d,e as g,j as h,k as v,o as i}from"./index-6EFolkGo.js";import{u as C}from"./useReferenceView-CoO5t6qc.js";import{u as _,_ as k,n as y,o as w,p as S,q as P}from"./FormField.vue_vue_type_script_setup_true_lang-BDJ46V17.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-fByiLTOw.js";import{_ as D}from"./DataTable.vue_vue_type_script_setup_true_lang-BaWuvIHH.js";import{_ as M}from"./Modal.vue_vue_type_script_setup_true_lang-DDauu2p3.js";const $={class:"space-y-6"},B=["onClick"],E=["onClick"],j={key:0,class:"rounded-md bg-red-50 p-4"},N={class:"text-sm text-red-800"},R=["disabled"],F=p({__name:"PersonsView",setup(q){const m=_(),e=C({getAll:P,create:S,update:w,delete:y},()=>m.fetchPersons(!0)),u=[{key:"id",label:"ID"},{key:"name",label:"ФИО"},{key:"is_deleted",label:"Статус"}];return c(()=>{e.loadData()}),(z,a)=>(i(),f(V,null,{default:s(()=>[n("div",$,[a[6]||(a[6]=n("div",null,[n("h2",{class:"text-2xl font-bold text-gray-900"},"Физические лица"),n("p",{class:"mt-1 text-sm text-gray-600"},"Управление справочником физических лиц")],-1)),l(D,{columns:u,data:t(e).table.data.value,loading:t(e).table.loading.value,pagination:t(e).table.pagination.value,onRowClick:t(e).handleEdit,onPageChange:t(e).handlePageChange,onSearch:t(e).handleSearch,onSort:t(e).handleSort},{"header-actions":s(()=>[n("button",{onClick:a[0]||(a[0]=(...o)=>t(e).handleCreate&&t(e).handleCreate(...o)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"},[...a[5]||(a[5]=[n("svg",{class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),g(" Создать ",-1)])])]),"cell-is_deleted":s(({value:o})=>[n("span",{class:x(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",o?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},d(o?"Удален":"Активен"),3)]),actions:s(({row:o})=>[n("button",{onClick:r(b=>t(e).handleEdit(o),["stop"]),class:"text-blue-600 hover:text-blue-900 mr-4"}," Изменить ",8,B),n("button",{onClick:r(b=>t(e).handleDelete(o),["stop"]),class:"text-red-600 hover:text-red-900"}," Удалить ",8,E)]),_:1},8,["data","loading","pagination","onRowClick","onPageChange","onSearch","onSort"]),l(M,{open:t(e).modalOpen.value,title:t(e).editingItem.value?"Редактирование физического лица":"Создание физического лица",size:"md",onClose:t(e).handleCloseModal},{footer:s(()=>[n("button",{onClick:a[3]||(a[3]=(...o)=>t(e).handleCloseModal&&t(e).handleCloseModal(...o)),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Отмена "),n("button",{onClick:a[4]||(a[4]=(...o)=>t(e).handleSubmit&&t(e).handleSubmit(...o)),type:"button",disabled:t(e).submitting.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},d(t(e).submitting.value?"Сохранение...":"Сохранить"),9,R)]),default:s(()=>[n("form",{onSubmit:a[2]||(a[2]=r((...o)=>t(e).handleSubmit&&t(e).handleSubmit(...o),["prevent"])),class:"space-y-4"},[l(k,{modelValue:t(e).formData.value.name,"onUpdate:modelValue":a[1]||(a[1]=o=>t(e).formData.value.name=o),label:"ФИО",type:"text",required:"",error:t(e).errors.value.name},null,8,["modelValue","error"]),t(e).submitError.value?(i(),h("div",j,[n("p",N,d(t(e).submitError.value),1)])):v("",!0)],32)]),_:1},8,["open","title","onClose"])])]),_:1}))}});export{F as default};
