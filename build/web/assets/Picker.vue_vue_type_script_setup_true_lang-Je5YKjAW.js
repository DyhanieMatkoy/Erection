import{d as h,f,g,p as w,j as l,k as u,a as o,b as V,e as C,t as c,n as y,T as K,w as B,l as z,s as q,i as L,F as M,m as N,o as a}from"./index-OcrUBGsV.js";const T={class:"relative"},I={key:0,class:"block text-sm font-medium text-gray-700 mb-1"},$={key:0,class:"text-red-500"},D=["disabled"],F={key:0,class:"block truncate"},S={key:1,class:"block truncate text-gray-400"},j={key:1,class:"mt-1 text-sm text-red-600"},A={key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},E={class:"sticky top-0 bg-white px-2 py-2 border-b border-gray-200"},P={key:0},Q={key:1},U=["onClick"],G={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-4 text-blue-600"},H={key:2,class:"py-2 px-3 text-sm text-gray-500"},R=h({__name:"Picker",props:{label:{},modelValue:{},items:{},valueKey:{default:"id"},displayKey:{default:"name"},placeholder:{default:"Выберите..."},required:{type:Boolean},disabled:{type:Boolean},error:{}},emits:["update:modelValue"],setup(e,{emit:x}){const i=e,v=x,r=f(!1),d=f(""),m=g(()=>i.items.find(n=>n[i.valueKey]===i.modelValue)),b=g(()=>{if(!d.value)return i.items;const n=d.value.toLowerCase();return i.items.filter(t=>{const s=t[i.displayKey];return typeof s=="string"&&s.toLowerCase().includes(n)})});function k(n){v("update:modelValue",n[i.valueKey]),r.value=!1,d.value=""}function p(){v("update:modelValue",null),r.value=!1,d.value=""}return w(r,n=>{n||(d.value="")}),(n,t)=>(a(),l("div",T,[e.label?(a(),l("label",I,[C(c(e.label)+" ",1),e.required?(a(),l("span",$,"*")):u("",!0)])):u("",!0),o("button",{type:"button",disabled:e.disabled,class:y(["relative w-full cursor-pointer rounded-md border bg-white py-2 pl-3 pr-10 text-left shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm",e.error?"border-red-300":"border-gray-300",e.disabled?"bg-gray-100 cursor-not-allowed":""]),onClick:t[0]||(t[0]=s=>r.value=!r.value)},[m.value?(a(),l("span",F,c(m.value[e.displayKey]),1)):(a(),l("span",S,c(e.placeholder),1)),t[4]||(t[4]=o("span",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},[o("svg",{class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])],-1))],10,D),e.error?(a(),l("p",j,c(e.error),1)):u("",!0),V(K,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:B(()=>[r.value?(a(),l("div",A,[o("div",E,[z(o("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),type:"text",placeholder:"Поиск...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onClick:t[2]||(t[2]=L(()=>{},["stop"]))},null,512),[[q,d.value]])]),!e.required&&e.modelValue?(a(),l("div",P,[o("div",{class:"relative cursor-pointer select-none py-2 pl-3 pr-9 hover:bg-gray-100 text-gray-500 border-b border-gray-200",onClick:p},[...t[5]||(t[5]=[o("span",{class:"block truncate italic"},"Очистить выбор",-1)])])])):u("",!0),b.value.length>0?(a(),l("div",Q,[(a(!0),l(M,null,N(b.value,s=>(a(),l("div",{key:s[e.valueKey],class:y(["relative cursor-pointer select-none py-2 pl-3 pr-9 hover:bg-gray-100",e.modelValue===s[e.valueKey]?"bg-blue-50 text-blue-900":"text-gray-900"]),onClick:J=>k(s)},[o("span",{class:y(["block truncate",e.modelValue===s[e.valueKey]?"font-semibold":"font-normal"])},c(s[e.displayKey]),3),e.modelValue===s[e.valueKey]?(a(),l("span",G,[...t[6]||(t[6]=[o("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})],-1)])])):u("",!0)],10,U))),128))])):(a(),l("div",H," Ничего не найдено "))])):u("",!0)]),_:1}),r.value?(a(),l("div",{key:2,class:"fixed inset-0 z-0",onClick:t[3]||(t[3]=s=>r.value=!1)})):u("",!0)]))}});export{R as _};
