"""–¢–µ—Å—Ç DBF Importer - delete references –∏ delete all docs"""
import sys
import os
sys.path.append(os.path.join(os.path.dirname(__file__), 'dbf_importer'))

from PyQt6.QtWidgets import QApplication, QMessageBox
from ui.main_window import DBFImporterMainWindow

def test_delete_functions():
    """–¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–π —É–¥–∞–ª–µ–Ω–∏—è –≤ DBF Importer"""
    
    print("üß™ –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–π —É–¥–∞–ª–µ–Ω–∏—è –≤ DBF Importer")
    print("=" * 60)
    
    print("\nüìã –ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:")
    print("   1. '–û—á–∏—Å—Ç–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏' (clear_references)")
    print("   2. '–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã' (delete_all_documents)")
    
    print("\nüîç –ê–Ω–∞–ª–∏–∑ 'clear_references':")
    print("   ‚úÖ –û—á–∏—â–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã: units, materials, works")
    print("   ‚úÖ –¢—Ä–µ–±—É–µ—Ç –≤—ã–±–æ—Ä–∞ DBF –ø—É—Ç–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—É–¥–æ–±–Ω–æ)")
    print("   ‚úÖ –ò–º–µ–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    print("   ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏")
    print("   ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Å rollback")
    
    print("\nüîç –ê–Ω–∞–ª–∏–∑ 'delete_all_documents':")
    print("   ‚úÖ –û—á–∏—â–∞–µ—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:")
    print("      ‚Ä¢ estimate_lines, daily_report_lines, daily_report_executors")
    print("      ‚Ä¢ timesheet_lines, work_execution_register")
    print("      ‚Ä¢ estimates, daily_reports, timesheets")
    print("   ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è (—Å–Ω–∞—á–∞–ª–∞ –¥–æ—á–µ—Ä–Ω–∏–µ –∑–∞–ø–∏—Å–∏)")
    print("   ‚úÖ –ü–æ–¥—Å—á–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π")
    print("   ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞")
    print("   ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –≤—ã–±–æ—Ä–∞ DBF –ø—É—Ç–∏")
    print("   ‚úÖ –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö")
    
    print("\n‚ö†Ô∏è  –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:")
    print("   ‚Ä¢ 'clear_references': —É–±—Ä–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ DBF –ø—É—Ç–∏")
    print("   ‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º")
    print("   ‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞")
    
    return True

def show_improvement_recommendations():
    """–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é"""
    
    print("\nüîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é:")
    print("=" * 40)
    
    print("\n1. –£–±—Ä–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ DBF –ø—É—Ç–∏ –¥–ª—è 'clear_references':")
    print("   –¢–µ–∫—É—â–∏–π –∫–æ–¥ —Ç—Ä–µ–±—É–µ—Ç –≤—ã–±–æ—Ä–∞ –ø—É—Ç–∏ –¥–∞–∂–µ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏")
    print("   –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —Ä–∞–∑—Ä–µ—à–∏—Ç—å –æ—á–∏—Å—Ç–∫—É –±–µ–∑ –≤—ã–±–æ—Ä–∞ –ø—É—Ç–∏")
    
    print("\n2. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π:")
    print("   –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ")
    print("   –ü—Ä–∏–º–µ—Ä: '–ë—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ: 15 –µ–¥–∏–Ω–∏—Ü, 234 –º–∞—Ç–µ—Ä–∏–∞–ª–∞, 567 —Ä–∞–±–æ—Ç'")
    
    print("\n3. –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫:")
    print("   –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö")
    print("   –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ")
    
    print("\n4. –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:")
    print("   –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Å–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º")
    print("   –°–æ—Ö—Ä–∞–Ω—è—Ç—å SQL –¥–∞–º–ø –≤ —Ñ–∞–π–ª")
    
    print("\n5. –£–ª—É—á—à–∏—Ç—å UX:")
    print("   –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤")
    print("   –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–∏")
    print("   –ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ")

if __name__ == "__main__":
    app = QApplication(sys.argv)
    
    # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞
    test_delete_functions()
    
    # –ü–æ–∫–∞–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    reply = QMessageBox.question(
        None,
        "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏",
        "–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–π —É–¥–∞–ª–µ–Ω–∏—è?",
        QMessageBox.StandardButton.Yes | QMessageBox.StandardButton.No,
        QMessageBox.StandardButton.Yes
    )
    
    if reply == QMessageBox.StandardButton.Yes:
        show_improvement_recommendations()
        input("\n\n–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞...")