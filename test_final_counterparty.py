"""Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ Ð²ÑÐµÑ… Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¹ Counterparty"""
import sys
import os
sys.path.append(os.path.join(os.path.dirname(__file__), 'src'))

from PyQt6.QtWidgets import QApplication, QMessageBox
from src.views.counterparty_form import CounterpartyForm

def test_all_fixes():
    """ÐŸÐ¾Ð»Ð½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð²ÑÐµÑ… Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¹"""
    app = QApplication(sys.argv)
    
    try:
        print("ðŸ§ª Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð³Ð¾ ÐºÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚Ð°...")
        form = CounterpartyForm(0)
        
        # Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ð¼ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸
        form.name_edit.setText("Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚")
        form.inn_edit.setText("1234567890")
        form.contact_person_edit.setText("Ð˜Ð²Ð°Ð½ Ð˜Ð²Ð°Ð½Ð¾Ð²")
        form.phone_edit.setText("+7-999-123-45-67")
        form.is_group = False
        
        print("âœ… Ð¤Ð¾Ñ€Ð¼Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð° Ñ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸")
        print("ðŸ“‹ Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸:")
        print(f"   ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ: {form.name_edit.text()}")
        print(f"   Ð˜ÐÐ: {form.inn_edit.text()}")
        print(f"   ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚: {form.contact_person_edit.text()}")
        print(f"   Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½: {form.phone_edit.text()}")
        print(f"   Ð“Ñ€ÑƒÐ¿Ð¿Ð°: {form.is_group}")
        
        form.show()
        
        print("\nðŸ’¡ Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸:")
        print("   1. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ 'Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ' Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ UUID")
        print("   2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð¾ÑˆÐ¸Ð±Ð¾Ðº Ð² ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸")
        print("   3. Ð—Ð°ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ñ„Ð¾Ñ€Ð¼Ñƒ Ð´Ð»Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ñ‚ÐµÑÑ‚Ð°")
        
        return app.exec()
        
    except Exception as e:
        QMessageBox.critical(None, "ÐžÑˆÐ¸Ð±ÐºÐ°", f"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ñ„Ð¾Ñ€Ð¼Ñ‹: {str(e)}")
        print(f"âŒ ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ°: {e}")
        return 0

def show_instructions():
    """Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð¿Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÑŽ"""
    print("ðŸš€ Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¹ Counterparty")
    print("=" * 60)
    
    print("\nðŸ“‹ Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ:")
    print("   âœ… ÐžÑˆÐ¸Ð±ÐºÐ° func.now(): Ð·Ð°Ð¼ÐµÐ½ÐµÐ½Ð° Ð½Ð° datetime.now()")
    print("   âœ… ÐžÑˆÐ¸Ð±ÐºÐ° F9: Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ðµ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¾Ð»ÐµÐ¹")
    print("   âœ… ÐžÑˆÐ¸Ð±ÐºÐ° created_at: ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹ ÑÑÑ‹Ð»ÐºÐ¸ Ð½Ð° Ð½ÐµÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÑƒÑŽ ÐºÐ¾Ð»Ð¾Ð½ÐºÑƒ")
    
    print("\nðŸ§ª Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ:")
    print("   1. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚Ð°:")
    print("      python test_final_counterparty.py")
    print("   2. Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ F9 ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ:")
    print("      - ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ ÑÐ¿Ð¸ÑÐ¾Ðº ÐºÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚Ð¾Ð²")
    print("      - Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð»ÑŽÐ±Ð¾Ð¹ ÐºÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚")
    print("      - ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ F9")
    print("      - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ Ð²ÑÐµ Ð¿Ð¾Ð»Ñ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹")
    print("      - ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ 'ÐšÐ¾Ð¿Ð¸Ñ - [Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»]'")
    
    print("\nðŸŽ¯ ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹:")
    print("   âœ… Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð±ÐµÐ· Ð¾ÑˆÐ¸Ð±Ð¾Ðº UUID")
    print("   âœ… ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÐµÐ¹ (ÐºÑ€Ð¾Ð¼Ðµ ID)")
    print("   âœ… ÐšÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ðµ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…")

if __name__ == "__main__":
    show_instructions()
    
    if len(sys.argv) > 1:
        test_all_fixes()