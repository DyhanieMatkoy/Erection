# üéØ –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–æ–∫

## ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!

### üìã –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

#### 1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ DataService
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–º–µ—á–µ–Ω–Ω—ã–µ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ —Å–ø–∏—Å–∫–∞—Ö  
**–ü—Ä–∏—á–∏–Ω–∞**: `DataService.get_documents()` –ù–ï —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª `marked_for_deletion = False`  
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `include_deleted`

**–§–∞–π–ª**: `api/services/data_service.py`
```python
def get_documents(
    self,
    model_class: Type,
    # ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ...
    include_deleted: bool = False  # –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
) -> Dict[str, Any]:
    query = self.db.query(model_class)
    
    # Apply Soft Delete Filter (exclude deleted by default)
    if not include_deleted and hasattr(model_class, 'marked_for_deletion'):
        query = query.filter(model_class.marked_for_deletion == False)
```

#### 2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–∫–æ–Ω–∫–∞ ‚ùå –¥–ª—è –∫–Ω–æ–ø–∫–∏ '–û—á–∏—Å—Ç–∏—Ç—å'
**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –†–∞—Å—à–∏—Ä–µ–Ω–∞ `ICON_MAP` –≤ ButtonStyler  
**–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å**: `'clear_filter': '‚ùå'`

**–§–∞–π–ª**: `src/views/utils/button_styler.py`
```python
ICON_MAP = {
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–∫–æ–Ω–∫–∏ ...
    'clear': '‚ùå',
    'clear_filter': '‚ùå',  # –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å
    'export': 'üì§',
    # ...
}
```

#### 3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–Ω–æ–ø–∫–∏ '–û—á–∏—Å—Ç–∏—Ç—å'
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ**: –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–º –ø–æ–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞  
**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –∫–Ω–æ–ø–∫–∏

**–§–∞–π–ª**: `src/views/components/filter_bar.py`
```python
def update_clear_button_visibility(self):
    """Update clear button visibility based on filter state"""
    has_search_text = bool(self.search_edit.text().strip())
    has_active_filters = any(
        hasattr(combo, 'currentData') and combo.currentData() is not None
        for combo in self.filters.values()
        if isinstance(combo, QComboBox)
    )
    
    # Show clear button if there's something to clear
    self.clear_btn.setVisible(has_search_text or has_active_filters)
```

#### 4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–Ω–∞—á–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –°–º–µ—Ç–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–Ω–æ–ø–∫–∏ –≤ EstimateDocumentForm –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç  
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–∏–º–µ–Ω–µ–Ω ButtonStyler –∫–æ –≤—Å–µ–º –æ—Å–Ω–æ–≤–Ω—ã–º –∫–Ω–æ–ø–∫–∞–º

**–§–∞–π–ª**: `src/views/estimate_document_form.py`
```python
# Action buttons
styler = get_button_styler()

self.save_button = QPushButton()
styler.apply_style(self.save_button, 'save')  # üíæ

self.save_close_button = QPushButton()
styler.apply_style(self.save_close_button, 'save_and_close')  # üíæ‚û°Ô∏è

self.post_button = QPushButton()
styler.apply_style(self.post_button, 'post')  # ‚Üí

self.print_button = QPushButton()
styler.apply_style(self.print_button, 'print')  # üñ®Ô∏è

# ... –∏ –¥—Ä—É–≥–∏–µ –∫–Ω–æ–ø–∫–∏
```

#### 5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫
**–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—ã–±–∏—Ä–∞—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö  
**–í–∞—Ä–∏–∞–Ω—Ç—ã**: –ö–Ω–æ–ø–∫–∏ –≤–≤–µ—Ä—Ö—É / –ö–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É / –ö–Ω–æ–ø–∫–∏ –∏ –≤–≤–µ—Ä—Ö—É, –∏ –≤–Ω–∏–∑—É

**–§–∞–π–ª**: `src/views/settings_dialog.py`
```python
# –ù–æ–≤–∞—è –≥—Ä—É–ø–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
position_group = QGroupBox("–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö")

self.top_radio = QRadioButton("–ö–Ω–æ–ø–∫–∏ –≤–≤–µ—Ä—Ö—É —Ñ–æ—Ä–º—ã")
self.bottom_radio = QRadioButton("–ö–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É —Ñ–æ—Ä–º—ã (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)")
self.both_radio = QRadioButton("–ö–Ω–æ–ø–∫–∏ –∏ –≤–≤–µ—Ä—Ö—É, –∏ –≤–Ω–∏–∑—É")

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ env.ini
if self.top_radio.isChecked():
    button_position = 'top'
elif self.both_radio.isChecked():
    button_position = 'both'
else:
    button_position = 'bottom'
self.config.set('Interface', 'button_position', button_position)
```

---

## üéØ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

### üîß DataService –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `include_deleted: bool = False`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –º–æ–¥–µ–ª–∏ –µ—Å—Ç—å `marked_for_deletion`
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è

### üé® ButtonStyler —É–ª—É—á—à–µ–Ω–∏—è:
- –ù–æ–≤—ã–π mapping: `'clear_filter': '‚ùå'`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FilterBar –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Å—Ç–∏–ª–µ–π –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Ç–µ–∫—Å—Ç/–∏–∫–æ–Ω—ã/–æ–±–∞)

### üîç FilterBar –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å:
- –ü–æ–¥–∫–ª—é—á–µ–Ω `textChanged` —Å–∏–≥–Ω–∞–ª –¥–ª—è –ø–æ–∏—Å–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ö–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å" –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### üìã EstimateDocumentButton –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç ButtonStyler
- –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –≤ tooltip'–∞—Ö
- –£–ª—É—á—à–µ–Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

### ‚öôÔ∏è SettingsDialog —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:
- –ù–æ–≤–∞—è –≥—Ä—É–ø–ø–∞ "–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö"
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –Ω–∞—Å—Ç—Ä–æ–µ–∫

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. **`api/services/data_service.py`** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
2. **`src/views/utils/button_styler.py`** - –Ω–æ–≤–∞—è –∏–∫–æ–Ω–∫–∞ clear_filter
3. **`src/views/components/filter_bar.py`** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–Ω–æ–ø–∫–∏
4. **`src/views/estimate_document_form.py`** - –∏–∫–æ–Ω–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
5. **`src/views/settings_dialog.py`** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:
- –í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã V2 –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç GenericListForm ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- FilterBar –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö —Å–ø–∏—Å–∫–æ–≤—ã—Ö —Ñ–æ—Ä–º–∞—Ö ‚Üí —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ–∑–¥–µ

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

### ‚úÖ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- **–£–¥–∞–ª–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –≤–∏–¥–Ω—ã** –≤ —Å–ø–∏—Å–∫–∞—Ö –ø–æ—Å–ª–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ "–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–º–µ—á–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤"
- **–ö–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å" –∏–º–µ–µ—Ç –∏–∫–æ–Ω–∫—É ‚ùå** –∏ –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **–°–º–µ—Ç–∞ –∏–º–µ–µ—Ç –∏–∫–æ–Ω–∫–∏** –Ω–∞ –≤—Å–µ—Ö –∫–Ω–æ–ø–∫–∞—Ö –¥–µ–π—Å—Ç–≤–∏–π
- **–ì–∏–±–∫–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫** - –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥ —Å–≤–æ–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è

### ‚úÖ –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
- **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏** —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π DataService
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –∏–∫–æ–Ω–∫–∏** –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- **–†–∞—Å—à–∏—Ä—è–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –¥–ª—è –±—É–¥—É—â–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é. –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —É–¥–∞–ª–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∫–æ–Ω–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º  
- ‚úÖ –°–∫—Ä—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–û—á–∏—Å—Ç–∏—Ç—å" –∫–æ–≥–¥–∞ –Ω–µ—á–µ–≥–æ –æ—á–∏—â–∞—Ç—å
- ‚úÖ –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** üéØ